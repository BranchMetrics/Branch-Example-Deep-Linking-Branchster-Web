---
machine:
  node:
    version: 0.10.31

dependencies:
  cache_directories:
    - "~/nvm/v0.10.31"
  post:
    # http://blog.kupriyanov.com/2014/08/solved-fixed-lossy-operations-are-not.html
    - sudo apt-get remove optipng
    - npm install && npm install -g grunt grunt-cli bower
    - bower install

test:
  override:
    - grunt build

deployment:
  angular:
    commands:
      - AWS_ACCESS_KEY_ID='AKIAJ47AUITIA7OD2XDQ' AWS_SECRET_ACCESS_KEY='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' aws s3 cp dist s3://branch-web-sdk/branchster-angular --recursive
